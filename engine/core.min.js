let canvas,ctx,padding,FPS,lastFrameTime,deltaT,now,startedLoop,body,gFill,gStrokeWeight,gStrokeColor,aspectRatio=null,fullscreen=!1,fpsInterval=1e3/FPS;function setFrameRate(t){if(startedLoop)return console.error("Cannot set Framerate after start");fpsInterval=1e3/(FPS=t)}function fixedUpdateLoop(){requestAnimationFrame(fixedUpdateLoop),now=Date.now(),(deltaT=now-lastFrameTime)>fpsInterval&&(lastFrameTime=now-deltaT%fpsInterval,fixedUpdate())}function updateLoop(){update(),requestAnimationFrame(updateLoop)}function createCanvas(t=500,e=500){canvas=document.createElement("canvas"),body.appendChild(canvas),canvas.width=t,canvas.height=e,ctx=canvas.getContext("2d"),fill("grey"),stroke(1,"black")}function createFullScreenCanvas(){fullscreen=!0,createCanvas(),window.addEventListener("resize",canvasResize),canvasResize()}function createResponsiveCanvas(t,e,n){createCanvas(),aspectRatio=[t,e],padding=n,window.addEventListener("resize",canvasResize),canvasResize()}function canvasResize(t=null,e=null){if(fullscreen)return canvas.width=window.innerWidth,void(canvas.height=window.innerHeight);if(t&&e)return canvas.width=t,void(canvas.height=e);if(aspectRatio){let t,e,n=window.innerWidth,a=window.innerHeight;aspectRatio[0]>aspectRatio[1]?e=(t=n)*aspectRatio[1]/aspectRatio[0]:aspectRatio[0]==aspectRatio[1]?e=t=n>=a?a:n:t=(e=a)*aspectRatio[0]/aspectRatio[1],canvas.width=t-padding,canvas.height=e-padding}}function background(t){ctx.fillStyle=t,ctx.fillRect(0,0,canvas.width,canvas.height)}function clear(){ctx.clearRect(0,0,canvas.width,canvas.height)}function rect(t,e,n,a){ctx.rect(t,e,n,a),style()}function circle(t,e,n){ctx.beginPath(),ctx.arc(t,e,n,0,2*Math.PI,!1),ctx.closePath(),style()}function ellipse(t,e,n,a){ctx.beginPath(),ctx.ellipse(t,e,n,a,0,0,2*Math.PI),ctx.closePath(),style()}function line(t,e,n,a){ctx.beginPath(),ctx.moveTo(t,e),ctx.lineTo(n,a),ctx.closePath(),ctx.lineWidth=gStrokeWeight,ctx.strokeStyle=gStrokeColor,gStrokeWeight&&gStrokeColor&&ctx.stroke()}function translate(t,e){ctx.translate(t,e)}function returnTranslate(){let t=ctx.getTransform();ctx.translate(-t.e,-t.f)}function noFill(){gFill=null}function noStroke(){gStrokeWeight=null,gStrokeColor=null}function stroke(t,e){gStrokeWeight=t,gStrokeColor=e}function fill(t){gFill=t}function style(){ctx.fillStyle=gFill,ctx.lineWidth=gStrokeWeight,ctx.strokeStyle=gStrokeColor,gFill&&ctx.fill(),gStrokeWeight&&gStrokeColor&&ctx.stroke()}async function asyncLoadImage(t){return new Promise(e=>{const n=new Image;n.src=t,n.onload=function(){e(this)}})}function loadImage(t,e){const n=new Image;return n.src=t,n.onload=e,n}function image(t,e=0,n=0,a,i,o,r,c,s){if("string"==typeof t){let l=new Image;l.src=t,l.onload=function(){a||(a=l.width),i||(i=l.height),c||(c=l.width),s||(s=l.height),ctx.drawImage(l,e,n,a,i,o,r,c,s)}}else{if("object"!=typeof t)return;ctx.drawImage(t,e,n,a,i,o,r,c,s)}}function map(t,e,n,a,i){return(t-e)/(n-e)*(i-a)+a}function lerp(t,e,n){return(1-n)*t+n*e}function random(t,e){return Math.random()*(e-t)+t}function randint(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}function deg2rad(t){return t*Math.PI/180}function sin(t){return Math.sin(deg2rad(t))}function cos(t){return Math.cos(deg2rad(t))}function tan(t){return Math.tan(deg2rad(t))}window.onload=function(){(body=document.getElementsByTagName("body")[0]).style.overflow="hidden";try{start&&start()}catch(t){console.error("Start function not found or error could be found")}try{update&&updateLoop()}catch(t){console.error("Update function not found")}try{fixedUpdate&&(lastFrameTime=Date.now(),fixedUpdateLoop(),startedLoop=!0)}catch(t){console.error("FixedUpdate function not found")}try{click&&(canvas.onmousedown=(t=>{t=t||window.event;const e=canvas.getBoundingClientRect();click(Math.trunc(t.clientX-e.left),Math.trunc(t.clientY-e.top))}))}catch(t){}};class Vector2{constructor(t,e){this.x=t,this.y=e}sqrMag(){return this.x*this.x+this.y*this.y}mag(){return Math.sqrt(this.sqrMag())}setMag(t){let e=this.mag();this.x=this.x/e*t,this.y=this.y/e*t}normalize(){let t=this.mag();return new Vector2(this.x/t,this.y/t)}Normalize(){let t=this.mag();this.x/=t,this.y/=t}distSqr(t){let e=this.x-t.x,n=this.y-t.y;return e*e+n*n}dist(t){return Math.sqrt(this.distSqr(t))}static dist(t,e){let n=t.x-e.x,a=t.y-e.y;return Math.sqrt(n*n+a*a)}static angleToDirection(t){return new Vector2(Math.cos(deg2rad(t)),-Math.sin(deg2rad(t)))}add(t){this.x+=t.x,this.y+=t.y}static add(t,e){return new Vector2(t.x+e.x,t.y+e.y)}subtract(t){this.x-=t.x,this.y-=t.y}static subtract(t,e){return new Vector2(t.x-e.x,t.y-e.y)}divide(t){this.x/=t.x,this.y/=t.y}static divide(t,e){return new Vector2(t.x/e.x,t.y/e.y)}multiply(t){this.x*=t.x,this.y*=t.y}static multiply(t,e){return new Vector2(t.x*e.x,t.y*e.y)}}function perlinNoise(t,e){return 0}function getPixels(t=0,e=0,n=null,a=null){return n||(n=canvas.width),a||(a=canvas.height),ctx.getImageData(t,e,n,a)}function updatePixels(t,e=0,n=0){ctx.putImageData(t,e,n)}const ARROW_UP=38,ARROW_DOWN=40,ARROW_LEFT=37,ARROW_RIGHT=39,SPACE=32;let mouseX,mouseY;document.addEventListener("keydown",function(t){let e=t.which||t.keyCode;try{keyDown(e)}catch(t){}}),document.addEventListener("keyup",function(t){let e=t.which||t.keyCode;try{keyUp(e)}catch(t){}}),document.onmousemove=(t=>{t=t||window.event;const e=canvas.getBoundingClientRect();mouseX=Math.trunc(t.clientX-e.left),mouseY=Math.trunc(t.clientY-e.top)});